<!DOCTYPE html>
<html lang="en">
<head>
  <title>WebSocket simple test</title>
</head>
<body>
<button onclick="javascript:sendmessage()">Click</button>
</body>
<script>

console.log(location.host);
console.log(location.hostname);

const ws = new WebSocket(`{{SERVERCONNECTION}}`);

ws.onopen = function() {
    console.log('Client Connected');
    sendmessage();
};

ws.onerror = error => {
  console.log(`WebSocket error: ${error}`)
}

ws.onmessage = function(e) {
  document.body.innerHTML=document.body.innerHTML+`<p>${e.data}</p>`;
  console.log("Received: '" + e.data + "'");
};

function sendmessage(){
  ws.send('Hello client.');
}

</script>
</html>